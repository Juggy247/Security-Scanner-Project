@admin_bp.route('/import', methods=['GET', 'POST'])
def import_data():
    """Import data from JSON file"""
    if request.method == 'POST':
        if 'file' not in request.files:
            flash('No file uploaded', 'error')
            return redirect(url_for('admin.import_data'))
        
        file = request.files['file']
        
        if file.filename == '':
            flash('No file selected', 'error')
            return redirect(url_for('admin.import_data'))
        
        if not file.filename.endswith('.json'):
            flash('Only JSON files are supported', 'error')
            return redirect(url_for('admin.import_data'))
        
        try:
            data = json.load(file)
            
            counts = {
                'tlds': 0,
                'brands': 0,
                'keywords': 0,
                'blacklist': 0
            }
            
            # Import TLDs
            if 'tlds' in data:
                counts['tlds'] = db.add_multiple_tlds(data['tlds'])
            
            # Import brands
            if 'brands' in data:
                counts['brands'] = db.add_multiple_brands(data['brands'])
            
            # Import keywords
            if 'keywords' in data:
                counts['keywords'] = db.add_multiple_keywords(data['keywords'])
            
            # Import blacklist
            if 'blacklist' in data:
                for domain_data in data['blacklist']:
                    if db.add_blacklisted_domain(**domain_data):
                        counts['blacklist'] += 1
            
            flash(f'Import successful! TLDs: {counts["tlds"]}, Brands: {counts["brands"]}, '
                  f'Keywords: {counts["keywords"]}, Blacklist: {counts["blacklist"]}', 'success')
            
            return redirect(url_for('admin.dashboard'))
            
        except json.JSONDecodeError:
            flash('Invalid JSON format', 'error')
        except Exception as e:
            flash(f'Import failed: {str(e)}', 'error')
    
    return render_template('admin/import.html')